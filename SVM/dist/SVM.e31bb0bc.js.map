{"version":3,"sources":["node_modules/svm/lib/svm.js","index.js"],"names":["svm","require","N","data","Array","labels","wb","ss","trainstats","dirty","degree_value","rbfKernelSigma","c_sig","alpha","svmC","a_value","SVM","kernelid","c","document","getElementById","ctx","getContext","covg","supp","kern","cdiv","sig","a","deg","alp","csig","setChange","myinit","retrainSVM","poly","v1","v2","s","q","length","Math","pow","sigmoid","tanh","hideSig","style","display","hideDeg","hidea","hidealp","hidecsig","showSig","appendChild","showDeg","showa","showalp","showcsig","train","kernel","C","getWeights","rbfsigma","update","draw","clearRect","WIDTH","HEIGHT","density","x","y","dec","marginOne","fillStyle","fillRect","strokeStyle","i","lineWidth","drawCircle","floor","xs","ys","b","w","beginPath","moveTo","lineTo","u","xi","yi","stroke","innerHTML","iters","numsupp","toPrecision","r","arc","PI","closePath","fill","mouseClick","shiftPressed","keyUp","key","splice","keyDown","refreshC","event","ui","logC","value","$","text","eventClick","e","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","canvas","offsetLeft","offsetTop","shiftKey","eventKeyUp","keycode","which","keyCode","eventKeyDown","FPS","width","height","addEventListener","setInterval","main","refreshSig","logSig","refreshDeg","logDeg","refreshA","logA","refreshAlpha","logAlpha","refreshCsig","logCsig","slider","orientation","animate","slide","max","min","step","css","ready","click","toggleClass","hasClass","prevKernel","prevData","prevLabel","getPrevKernel","getPrevData","getPrevLabel","setPrevKernel","kid","setPrevData","setPrevLabel"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5VA,IAAIA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;;AAEA,IAAIC,CAAC,GAAG,EAAR,EAAY;;AACZ,IAAIC,IAAI,GAAG,IAAIC,KAAJ,CAAUF,CAAV,CAAX;AACA,IAAIG,MAAM,GAAG,IAAID,KAAJ,CAAUF,CAAV,CAAb;AACA,IAAII,EAAJ,EAAQ;;AACR,IAAIC,EAAE,GAAG,IAAT,EAAe;;AACf,IAAIC,UAAJ;AACA,IAAIC,KAAK,GAAG,IAAZ;AAEA,IAAIC,YAAY,GAAG,CAAnB;AACA,IAAIC,cAAc,GAAG,GAArB;AACA,IAAIC,KAAK,GAAG,KAAZ;AACA,IAAIC,KAAK,GAAG,IAAZ;AACA,IAAIC,IAAI,GAAG,IAAX;AACA,IAAIC,OAAO,GAAG,GAAd;AAEA,IAAIC,GAAG,GAAG,IAAIhB,GAAG,CAACgB,GAAR,EAAV;AAEA,IAAIC,QAAQ,GAAG,CAAf;AACA,IAAIC,CAAC,GAAGC,QAAQ,CAAC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","file":"SVM.e31bb0bc.js","sourceRoot":"..","sourcesContent":["// MIT License\r\n// Andrej Karpathy\r\n\r\nvar svmjs = (function(exports){\r\n\r\n  /*\r\n    This is a binary SVM and is trained using the SMO algorithm.\r\n    Reference: \"The Simplified SMO Algorithm\" (http://math.unt.edu/~hsp0009/smo.pdf)\r\n    \r\n    Simple usage example:\r\n    svm = svmjs.SVM();\r\n    svm.train(data, labels);\r\n    testlabels = svm.predict(testdata);\r\n  */\r\n  var SVM = function(options) {\r\n  }\r\n\r\n  SVM.prototype = {\r\n    \r\n    // data is NxD array of floats. labels are 1 or -1.\r\n    train: function(data, labels, options) {\r\n      \r\n      // we need these in helper functions\r\n      this.data = data;\r\n      this.labels = labels;\r\n\r\n      // parameters\r\n      options = options || {};\r\n      var C = options.C || 1.0; // C value. Decrease for more regularization\r\n      var tol = options.tol || 1e-4; // numerical tolerance. Don't touch unless you're pro\r\n      var alphatol = options.alphatol || 1e-7; // non-support vectors for space and time efficiency are truncated. To guarantee correct result set this to 0 to do no truncating. If you want to increase efficiency, experiment with setting this little higher, up to maybe 1e-4 or so.\r\n      var maxiter = options.maxiter || 10000; // max number of iterations\r\n      var numpasses = options.numpasses || 10; // how many passes over data with no change before we halt? Increase for more precision.\r\n      \r\n      // instantiate kernel according to options. kernel can be given as string or as a custom function\r\n      var kernel = linearKernel;\r\n      this.kernelType = \"linear\";\r\n      if(\"kernel\" in options) {\r\n        if(typeof options.kernel === \"string\") {\r\n          // kernel was specified as a string. Handle these special cases appropriately\r\n          if(options.kernel === \"linear\") { \r\n            this.kernelType = \"linear\"; \r\n            kernel = linearKernel; \r\n          }\r\n          if(options.kernel === \"rbf\") { \r\n            var rbfSigma = options.rbfsigma || 0.5;\r\n            this.rbfSigma = rbfSigma; // back this up\r\n            this.kernelType = \"rbf\";\r\n            kernel = makeRbfKernel(rbfSigma);\r\n          }\r\n        } else {\r\n          // assume kernel was specified as a function. Let's just use it\r\n          this.kernelType = \"custom\";\r\n          kernel = options.kernel;\r\n        }\r\n      }\r\n\r\n      // initializations\r\n      this.kernel = kernel;\r\n      this.N = data.length; var N = this.N;\r\n      this.D = data[0].length; var D = this.D;\r\n      this.alpha = zeros(N);\r\n      this.b = 0.0;\r\n      this.usew_ = false; // internal efficiency flag\r\n\r\n      // run SMO algorithm\r\n      var iter = 0;\r\n      var passes = 0;\r\n      while(passes < numpasses && iter < maxiter) {\r\n        \r\n        var alphaChanged = 0;\r\n        for(var i=0;i<N;i++) {\r\n        \r\n          var Ei= this.marginOne(data[i]) - labels[i];\r\n          if( (labels[i]*Ei < -tol && this.alpha[i] < C)\r\n           || (labels[i]*Ei > tol && this.alpha[i] > 0) ){\r\n            \r\n            // alpha_i needs updating! Pick a j to update it with\r\n            var j = i;\r\n            while(j === i) j= randi(0, this.N);\r\n            var Ej= this.marginOne(data[j]) - labels[j];\r\n            \r\n            // calculate L and H bounds for j to ensure we're in [0 C]x[0 C] box\r\n            ai= this.alpha[i];\r\n            aj= this.alpha[j];\r\n            var L = 0; var H = C;\r\n            if(labels[i] === labels[j]) {\r\n              L = Math.max(0, ai+aj-C);\r\n              H = Math.min(C, ai+aj);\r\n            } else {\r\n              L = Math.max(0, aj-ai);\r\n              H = Math.min(C, C+aj-ai);\r\n            }\r\n            \r\n            if(Math.abs(L - H) < 1e-4) continue;\r\n            \r\n            var eta = 2*kernel(data[i],data[j]) - kernel(data[i],data[i]) - kernel(data[j],data[j]);\r\n            if(eta >= 0) continue;\r\n            \r\n            // compute new alpha_j and clip it inside [0 C]x[0 C] box\r\n            // then compute alpha_i based on it.\r\n            var newaj = aj - labels[j]*(Ei-Ej) / eta;\r\n            if(newaj>H) newaj = H;\r\n            if(newaj<L) newaj = L;\r\n            if(Math.abs(aj - newaj) < 1e-4) continue; \r\n            this.alpha[j] = newaj;\r\n            var newai = ai + labels[i]*labels[j]*(aj - newaj);\r\n            this.alpha[i] = newai;\r\n            \r\n            // update the bias term\r\n            var b1 = this.b - Ei - labels[i]*(newai-ai)*kernel(data[i],data[i])\r\n                     - labels[j]*(newaj-aj)*kernel(data[i],data[j]);\r\n            var b2 = this.b - Ej - labels[i]*(newai-ai)*kernel(data[i],data[j])\r\n                     - labels[j]*(newaj-aj)*kernel(data[j],data[j]);\r\n            this.b = 0.5*(b1+b2);\r\n            if(newai > 0 && newai < C) this.b= b1;\r\n            if(newaj > 0 && newaj < C) this.b= b2;\r\n            \r\n            alphaChanged++;\r\n            \r\n          } // end alpha_i needed updating\r\n        } // end for i=1..N\r\n        \r\n        iter++;\r\n        //console.log(\"iter number %d, alphaChanged = %d\", iter, alphaChanged);\r\n        if(alphaChanged == 0) passes++;\r\n        else passes= 0;\r\n        \r\n      } // end outer loop\r\n      \r\n      // if the user was using a linear kernel, lets also compute and store the\r\n      // weights. This will speed up evaluations during testing time\r\n      if(this.kernelType === \"linear\") {\r\n\r\n        // compute weights and store them\r\n        this.w = new Array(this.D);\r\n        for(var j=0;j<this.D;j++) {\r\n          var s= 0.0;\r\n          for(var i=0;i<this.N;i++) {\r\n            s+= this.alpha[i] * labels[i] * data[i][j];\r\n          }\r\n          this.w[j] = s;\r\n          this.usew_ = true;\r\n        }\r\n      } else {\r\n\r\n        // okay, we need to retain all the support vectors in the training data,\r\n        // we can't just get away with computing the weights and throwing it out\r\n\r\n        // But! We only need to store the support vectors for evaluation of testing\r\n        // instances. So filter here based on this.alpha[i]. The training data\r\n        // for which this.alpha[i] = 0 is irrelevant for future. \r\n        var newdata = [];\r\n        var newlabels = [];\r\n        var newalpha = [];\r\n        for(var i=0;i<this.N;i++) {\r\n          //console.log(\"alpha=%f\", this.alpha[i]);\r\n          if(this.alpha[i] > alphatol) {\r\n            newdata.push(this.data[i]);\r\n            newlabels.push(this.labels[i]);\r\n            newalpha.push(this.alpha[i]);\r\n          }\r\n        }\r\n\r\n        // store data and labels\r\n        this.data = newdata;\r\n        this.labels = newlabels;\r\n        this.alpha = newalpha;\r\n        this.N = this.data.length;\r\n        //console.log(\"filtered training data from %d to %d support vectors.\", data.length, this.data.length);\r\n      }\r\n\r\n      var trainstats = {};\r\n      trainstats.iters= iter;\r\n      return trainstats;\r\n    }, \r\n    \r\n    // inst is an array of length D. Returns margin of given example\r\n    // this is the core prediction function. All others are for convenience mostly\r\n    // and end up calling this one somehow.\r\n    marginOne: function(inst) {\r\n\r\n      var f = this.b;\r\n      // if the linear kernel was used and w was computed and stored,\r\n      // (i.e. the svm has fully finished training)\r\n      // the internal class variable usew_ will be set to true.\r\n      if(this.usew_) {\r\n\r\n        // we can speed this up a lot by using the computed weights\r\n        // we computed these during train(). This is significantly faster\r\n        // than the version below\r\n        for(var j=0;j<this.D;j++) {\r\n          f += inst[j] * this.w[j];\r\n        }\r\n\r\n      } else {\r\n\r\n        for(var i=0;i<this.N;i++) {\r\n          f += this.alpha[i] * this.labels[i] * this.kernel(inst, this.data[i]);\r\n        }\r\n      }\r\n\r\n      return f;\r\n    },\r\n    \r\n    predictOne: function(inst) { \r\n      return this.marginOne(inst) > 0 ? 1 : -1; \r\n    },\r\n    \r\n    // data is an NxD array. Returns array of margins.\r\n    margins: function(data) {\r\n      \r\n      // go over support vectors and accumulate the prediction. \r\n      var N = data.length;\r\n      var margins = new Array(N);\r\n      for(var i=0;i<N;i++) {\r\n        margins[i] = this.marginOne(data[i]);\r\n      }\r\n      return margins;\r\n      \r\n    },\r\n    \r\n    // data is NxD array. Returns array of 1 or -1, predictions\r\n    predict: function(data) {\r\n      var margs = this.margins(data);\r\n      for(var i=0;i<margs.length;i++) {\r\n        margs[i] = margs[i] > 0 ? 1 : -1;\r\n      }\r\n      return margs;\r\n    },\r\n    \r\n    // THIS FUNCTION IS NOW DEPRECATED. WORKS FINE BUT NO NEED TO USE ANYMORE. \r\n    // LEAVING IT HERE JUST FOR BACKWARDS COMPATIBILITY FOR A WHILE.\r\n    // if we trained a linear svm, it is possible to calculate just the weights and the offset\r\n    // prediction is then yhat = sign(X * w + b)\r\n    getWeights: function() {\r\n      \r\n      // DEPRECATED\r\n      var w= new Array(this.D);\r\n      for(var j=0;j<this.D;j++) {\r\n        var s= 0.0;\r\n        for(var i=0;i<this.N;i++) {\r\n          s+= this.alpha[i] * this.labels[i] * this.data[i][j];\r\n        }\r\n        w[j]= s;\r\n      }\r\n      return {w: w, b: this.b};\r\n    },\r\n\r\n    toJSON: function() {\r\n      \r\n      if(this.kernelType === \"custom\") {\r\n        console.log(\"Can't save this SVM because it's using custom, unsupported kernel...\");\r\n        return {};\r\n      }\r\n\r\n      json = {}\r\n      json.N = this.N;\r\n      json.D = this.D;\r\n      json.b = this.b;\r\n\r\n      json.kernelType = this.kernelType;\r\n      if(this.kernelType === \"linear\") { \r\n        // just back up the weights\r\n        json.w = this.w; \r\n      }\r\n      if(this.kernelType === \"rbf\") { \r\n        // we need to store the support vectors and the sigma\r\n        json.rbfSigma = this.rbfSigma; \r\n        json.data = this.data;\r\n        json.labels = this.labels;\r\n        json.alpha = this.alpha;\r\n      }\r\n\r\n      return json;\r\n    },\r\n    \r\n    fromJSON: function(json) {\r\n      \r\n      this.N = json.N;\r\n      this.D = json.D;\r\n      this.b = json.b;\r\n\r\n      this.kernelType = json.kernelType;\r\n      if(this.kernelType === \"linear\") { \r\n\r\n        // load the weights! \r\n        this.w = json.w; \r\n        this.usew_ = true; \r\n        this.kernel = linearKernel; // this shouldn't be necessary\r\n      }\r\n      else if(this.kernelType == \"rbf\") {\r\n\r\n        // initialize the kernel\r\n        this.rbfSigma = json.rbfSigma; \r\n        this.kernel = makeRbfKernel(this.rbfSigma);\r\n\r\n        // load the support vectors\r\n        this.data = json.data;\r\n        this.labels = json.labels;\r\n        this.alpha = json.alpha;\r\n      } else {\r\n        console.log(\"ERROR! unrecognized kernel type.\" + this.kernelType);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Kernels\r\n  function makeRbfKernel(sigma) {\r\n    return function(v1, v2) {\r\n      var s=0;\r\n      for(var q=0;q<v1.length;q++) { s += (v1[q] - v2[q])*(v1[q] - v2[q]); } \r\n      return Math.exp(-s/(2.0*sigma*sigma));\r\n    }\r\n  }\r\n  \r\n  function linearKernel(v1, v2) {\r\n    var s=0; \r\n    for(var q=0;q<v1.length;q++) { s += v1[q] * v2[q]; } \r\n    return s;\r\n  }\r\n\r\n  // Misc utility functions\r\n  // generate random floating point number between a and b\r\n  function randf(a, b) {\r\n    return Math.random()*(b-a)+a;\r\n  }\r\n\r\n  // generate random integer between a and b (b excluded)\r\n  function randi(a, b) {\r\n     return Math.floor(Math.random()*(b-a)+a);\r\n  }\r\n\r\n  // create vector of zeros of length n\r\n  function zeros(n) {\r\n    var arr= new Array(n);\r\n    for(var i=0;i<n;i++) { arr[i]= 0; }\r\n    return arr;\r\n  }\r\n\r\n  // export public members\r\n  exports = exports || {};\r\n  exports.SVM = SVM;\r\n  exports.makeRbfKernel = makeRbfKernel;\r\n  exports.linearKernel = linearKernel;\r\n  return exports;\r\n\r\n})(typeof module != 'undefined' && module.exports);  // add exports to module.exports if in node.js\r\n","var svm = require(\"svm\");\n\nvar N = 10; //number of data points\nvar data = new Array(N);\nvar labels = new Array(N);\nvar wb; // weights and offset structure\nvar ss = 50.0; // scaling factor for drawing\nvar trainstats;\nvar dirty = true;\n\nvar degree_value = 3;\nvar rbfKernelSigma = 1.0;\nvar c_sig = 0.050;\nvar alpha = 0.32;\nvar svmC = 10.0;\nvar a_value = 1.0;\n\nvar SVM = new svm.SVM();\n\nvar kernelid = 0;\nvar c = document.getElementById(\"NPGcanvas\");\nvar ctx = c.getContext('2d');\n\nvar covg = document.getElementById(\"covg\");\nvar supp = document.getElementById(\"supp\");\nvar kern = document.getElementById(\"kern\");\nvar cdiv = document.getElementById(\"c\");\nvar sig = document.getElementById(\"sig\");\nvar a = document.getElementById(\"a\");\nvar deg = document.getElementById(\"deg\");\nvar alp = document.getElementById(\"alp\");\nvar csig = document.getElementById(\"csig\");\n\ndata[0] = [-0.4326, 1.1909];\ndata[1] = [3.0, 4.0];\ndata[2] = [0.1253, -0.0376];\ndata[3] = [0.2877, 0.3273];\ndata[4] = [-1.1465, 0.1746];\ndata[5] = [1.8133, 2.1139];\ndata[6] = [2.7258, 3.0668];\ndata[7] = [1.4117, 2.0593];\ndata[8] = [4.1832, 1.9044];\ndata[9] = [1.8636, 1.1677];\nlabels[0] = 1;\nlabels[1] = 1;\nlabels[2] = 1;\nlabels[3] = 1;\nlabels[4] = 1;\nlabels[5] = -1;\nlabels[6] = -1;\nlabels[7] = -1;\nlabels[8] = -1;\nlabels[9] = -1;\n\nsetChange(10);\n\nfunction myinit() {\n    retrainSVM();\n}\n\nfunction poly() {\n    return function(v1, v2) {\n        var s = 0;\n        for (var q = 0; q < v1.length; q++) { s += ((v1[q] * v2[q]) + a_value) }\n        return Math.pow(s, degree_value);\n    }\n\n}\n\nfunction sigmoid() {\n    return function(v1, v2) {\n        var s = 0;\n        for (var q = 0; q < v1.length; q++) { s += (v1[q] * v2[q]) }\n        return Math.tanh(((alpha * s) + c_sig));\n    }\n}\n\nfunction hideSig() {\n    document.getElementById(\"sigreport\").style.display = \"none\";\n    document.getElementById(\"slider2\").style.display = \"none\";\n}\n\nfunction hideDeg() {\n    document.getElementById(\"degreport\").style.display = \"none\";\n    document.getElementById(\"slider3\").style.display = \"none\";\n}\n\nfunction hidea() {\n    document.getElementById(\"areport\").style.display = \"none\";\n    document.getElementById(\"slider4\").style.display = \"none\";\n}\n\nfunction hidealp() {\n    document.getElementById(\"alpreport\").style.display = \"none\";\n    document.getElementById(\"slider5\").style.display = \"none\";\n}\n\nfunction hidecsig() {\n    document.getElementById(\"csigreport\").style.display = \"none\";\n    document.getElementById(\"slider6\").style.display = \"none\";\n}\n\nfunction showSig() {\n    document.getElementById(\"report\").appendChild(document.getElementById(\"sigreport\"));\n    document.getElementById(\"rider\").appendChild(document.getElementById(\"slider2\"));\n    document.getElementById(\"sigreport\").style.display = \"block\";\n    document.getElementById(\"slider2\").style.display = \"block\";\n}\n\nfunction showDeg() {\n    document.getElementById(\"report\").appendChild(document.getElementById(\"degreport\"));\n    document.getElementById(\"rider\").appendChild(document.getElementById(\"slider3\"));\n    document.getElementById(\"degreport\").style.display = \"block\";\n    document.getElementById(\"slider3\").style.display = \"block\";\n}\n\nfunction showa() {\n    document.getElementById(\"preport\").appendChild(document.getElementById(\"areport\"));\n    document.getElementById(\"provider\").appendChild(document.getElementById(\"slider4\"));\n    document.getElementById(\"areport\").style.display = \"block\";\n    document.getElementById(\"slider4\").style.display = \"block\";\n}\n\nfunction showalp() {\n    document.getElementById(\"report\").appendChild(document.getElementById(\"alpreport\"));\n    document.getElementById(\"rider\").appendChild(document.getElementById(\"slider5\"));\n    document.getElementById(\"alpreport\").style.display = \"block\";\n    document.getElementById(\"slider5\").style.display = \"block\";\n}\n\nfunction showcsig() {\n    document.getElementById(\"preport\").appendChild(document.getElementById(\"csigreport\"));\n    document.getElementById(\"provider\").appendChild(document.getElementById(\"slider6\"));\n    document.getElementById(\"csigreport\").style.display = \"block\";\n    document.getElementById(\"slider6\").style.display = \"block\";\n}\n\nfunction retrainSVM() {\n\n    if (kernelid == 0) {\n        trainstats = SVM.train(data, labels, { kernel: 'linear', C: svmC });\n        wb = SVM.getWeights();\n        hideSig();\n        hidea();\n        hidealp();\n        hidecsig();\n        hideDeg();\n    } else if (kernelid == 1) {\n        trainstats = SVM.train(data, labels, { kernel: 'rbf', rbfsigma: rbfKernelSigma, C: svmC });\n        showSig();\n        hidea();\n        hidealp();\n        hidecsig();\n        hideDeg();\n    } else if (kernelid == 2) {\n        trainstats = SVM.train(data, labels, {\n            kernel: poly(),\n            C: svmC\n        });\n        hideSig();\n        showa();\n        hidealp();\n        hidecsig();\n        showDeg();\n    } else if (kernelid == 3) {\n        trainstats = SVM.train(data, labels, {\n            kernel: sigmoid(),\n            rbfsigma: rbfKernelSigma,\n            C: svmC\n        });\n        hideSig();\n        hidea();\n        showalp();\n        showcsig();\n        hideDeg();\n    }\n\n    dirty = true; // to redraw screen\n}\n\nfunction update() {}\n\n\n\nfunction draw() {\n    if (!dirty) return;\n\n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\n\n    // draw decisions in the grid\n    var density = 4.0;\n    for (var x = 0.0; x <= WIDTH; x += density) {\n        for (var y = 0.0; y <= HEIGHT; y += density) {\n            var dec = SVM.marginOne([(x - WIDTH / 2) / ss, (y - HEIGHT / 2) / ss]);\n            if (dec > 0) ctx.fillStyle = '#4169E1';\n            else ctx.fillStyle = '#ffef00';\n            ctx.fillRect(x - density / 2 - 1, y - density - 1, density + 2, density + 2);\n        }\n    }\n\n\n    // draw datapoints. Draw support vectors larger\n    ctx.strokeStyle = 'rgb(0,0,0)';\n    for (var i = 0; i < N; i++) {\n\n        if (labels[i] == 1) ctx.fillStyle = '#0080FF';\n        else ctx.fillStyle = '#FFAA00';\n\n        if (SVM.alpha[i] > 1e-2) ctx.lineWidth = 3; // distinguish support vectors\n        else ctx.lineWidth = 1;\n\n        drawCircle(data[i][0] * ss + WIDTH / 2, data[i][1] * ss + HEIGHT / 2, Math.floor(5));\n    }\n\n    // if linear kernel, draw decision boundary and margin lines\n    if (kernelid == 0) {\n\n        var xs = [-5, 5];\n        var ys = [0, 0];\n        ys[0] = (-wb.b - wb.w[0] * xs[0]) / wb.w[1];\n        ys[1] = (-wb.b - wb.w[0] * xs[1]) / wb.w[1];\n        ctx.fillStyle = 'rgb(0,0,0)';\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        // wx+b=0 line\n        ctx.moveTo(xs[0] * ss + WIDTH / 2, ys[0] * ss + HEIGHT / 2);\n        ctx.lineTo(xs[1] * ss + WIDTH / 2, ys[1] * ss + HEIGHT / 2);\n        // wx+b=1 line\n        ctx.moveTo(xs[0] * ss + WIDTH / 2, (ys[0] - 1.0 / wb.w[1]) * ss + HEIGHT / 2);\n        ctx.lineTo(xs[1] * ss + WIDTH / 2, (ys[1] - 1.0 / wb.w[1]) * ss + HEIGHT / 2);\n        // wx+b=-1 line\n        ctx.moveTo(xs[0] * ss + WIDTH / 2, (ys[0] + 1.0 / wb.w[1]) * ss + HEIGHT / 2);\n        ctx.lineTo(xs[1] * ss + WIDTH / 2, (ys[1] + 1.0 / wb.w[1]) * ss + HEIGHT / 2);\n\n        for (var i = 0; i < N; i++) {\n            if (SVM.alpha[i] < 1e-2) continue;\n            if (labels[i] == 1) {\n                ys[0] = (1 - wb.b - wb.w[0] * xs[0]) / wb.w[1];\n                ys[1] = (1 - wb.b - wb.w[0] * xs[1]) / wb.w[1];\n            } else {\n                ys[0] = (-1 - wb.b - wb.w[0] * xs[0]) / wb.w[1];\n                ys[1] = (-1 - wb.b - wb.w[0] * xs[1]) / wb.w[1];\n            }\n            var u = (data[i][0] - xs[0]) * (xs[1] - xs[0]) + (data[i][1] - ys[0]) * (ys[1] - ys[0]);\n            u = u / ((xs[0] - xs[1]) * (xs[0] - xs[1]) + (ys[0] - ys[1]) * (ys[0] - ys[1]));\n            var xi = xs[0] + u * (xs[1] - xs[0]);\n            var yi = ys[0] + u * (ys[1] - ys[0]);\n            ctx.moveTo(data[i][0] * ss + WIDTH / 2, data[i][1] * ss + HEIGHT / 2);\n            ctx.lineTo(xi * ss + WIDTH / 2, yi * ss + HEIGHT / 2);\n        }\n        ctx.stroke();\n    }\n\n    ctx.fillStyle = 'rgb(0,0,0)';\n    covg.innerHTML = \"Converged in \" + trainstats.iters + \" iterations\";\n\n    var numsupp = 0;\n    for (var i = 0; i < N; i++) { if (SVM.alpha[i] > 1e-2) numsupp++; }\n    supp.innerHTML = \"No. of Support Vectors: \" + numsupp;\n\n    kern.innerHTML = \"Using Linear kernel\";\n    cdiv.innerHTML = \"C = \" + svmC.toPrecision(2);\n    if (kernelid == 0) {\n        document.getElementById(\"linear_info\").style.display = \"block\";\n        document.getElementById(\"poly_info\").style.display = \"none\";\n        document.getElementById(\"rbf_info\").style.display = \"none\";\n        document.getElementById(\"sigmoid_info\").style.display = \"none\";\n        kern.innerHTML = \"Using Linear kernel\";\n        cdiv.innerHTML = \"C = \" + svmC.toPrecision(2);\n    }\n    if (kernelid == 1) {\n        document.getElementById(\"linear_info\").style.display = \"none\";\n        document.getElementById(\"poly_info\").style.display = \"none\";\n        document.getElementById(\"rbf_info\").style.display = \"block\";\n        document.getElementById(\"sigmoid_info\").style.display = \"none\";\n        kern.innerHTML = \"Using Gaussian kernel\";\n        cdiv.innerHTML = \"C = \" + svmC.toPrecision(2);\n        sig.style.display = \"list-item\";\n        csig.style.display = \"none\";\n        a.style.display = \"none\";\n        alp.style.display = \"none\";\n        deg.style.display = \"none\";\n        sig.innerHTML = \"Gaussian Kernel Sigma: \" + rbfKernelSigma.toPrecision(2);\n    }\n    if (kernelid == 2) {\n        document.getElementById(\"linear_info\").style.display = \"none\";\n        document.getElementById(\"poly_info\").style.display = \"block\";\n        document.getElementById(\"rbf_info\").style.display = \"none\";\n        document.getElementById(\"sigmoid_info\").style.display = \"none\";\n        kern.innerHTML = \"Using Polynomial kernel\";\n        cdiv.innerHTML = \"C = \" + svmC.toPrecision(2);\n        deg.style.display = \"list-item\";\n        sig.style.display = \"none\";\n        alp.style.display = \"none\";\n        csig.style.display = \"none\";\n        deg.innerHTML = \"Polynomial Kernel Degree: \" + degree_value;\n        a.style.display = \"list-item\";\n        a.innerHTML = \"Polynomial Kernel a: \" + a_value.toPrecision(2);\n    }\n    if (kernelid == 3) {\n        document.getElementById(\"linear_info\").style.display = \"none\";\n        document.getElementById(\"poly_info\").style.display = \"none\";\n        document.getElementById(\"rbf_info\").style.display = \"none\";\n        document.getElementById(\"sigmoid_info\").style.display = \"block\";\n        kern.innerHTML = \"Using Sigmoid kernel\";\n        cdiv.innerHTML = \"C = \" + svmC.toPrecision(2);\n        alp.style.display = \"list-item\";\n        sig.style.display = \"none\";\n        deg.style.display = \"none\";\n        a.style.display = \"none\";\n        alp.innerHTML = \"Sigmoid Kernel alpha: \" + alpha.toPrecision(2);\n        csig.style.display = \"list-item\";\n        csig.innerHTML = \"Sigmoid Kernel c: \" + c_sig.toPrecision(2);\n    }\n\n}\n\nfunction drawCircle(x, y, r) {\n    ctx.beginPath();\n    ctx.arc(x, y, r, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.fill();\n}\n\nfunction mouseClick(x, y, shiftPressed) {\n\n    // add datapoint at location of click\n    data[N] = [(x - WIDTH / 2) / ss, (y - HEIGHT / 2) / ss];\n    labels[N] = shiftPressed ? 1 : -1;\n    N += 1;\n\n    // retrain the svm\n    retrainSVM();\n}\n\nfunction keyUp(key) {\n\n    if (key == 67) { // 'c'\n\n        // clear the points\n        data = data.splice(0, 10);\n        labels = labels.splice(0, 10);\n        N = 10;\n        retrainSVM();\n    }\n\n    if (key == 76) { // 'l'\n        // Switch to linear kernel\n\n        kernelid = 0;\n        retrainSVM();\n    }\n\n    if (key == 82) { // 'r'\n        // Switch to rbf kernel\n\n        kernelid = 1;\n        retrainSVM();\n    }\n\n    if (key == 80) { // 'p'\n        // Switch to polynomial kernel\n\n        kernelid = 2;\n        retrainSVM();\n    }\n\n    if (key == 83) { // 's'\n        // Switch to sigmoid kernel\n\n        kernelid = 3;\n        retrainSVM();\n    }\n\n    if (key == 85) { // 'u'\n        // Undo\n        data = data.splice(0, N - 1);\n        labels = labels.splice(0, N - 1);\n        N = N - 1;\n        retrainSVM();\n    }\n}\n\nfunction keyDown(key) {}\n\n\n// UI stuff\nfunction refreshC(event, ui) {\n    var logC = ui.value;\n    svmC = Math.pow(10, logC);\n    $(\"#creport\").text(\"C = \" + svmC.toPrecision(2));\n    retrainSVM();\n}\n\nfunction eventClick(e) {\n    var x;\n    var y;\n    if (e.pageX || e.pageY) {\n        x = e.pageX;\n        y = e.pageY;\n    } else {\n        x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n        y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n    }\n    x -= canvas.offsetLeft;\n    y -= canvas.offsetTop;\n    mouseClick(x, y, e.shiftKey);\n}\n\nfunction eventKeyUp(e) {\n    var keycode = ('which' in e) ? e.which : e.keyCode;\n    keyUp(keycode);\n}\n\nfunction eventKeyDown(e) {\n    var keycode = ('which' in e) ? e.which : e.keyCode;\n    keyDown(keycode);\n}\n\nfunction setChange(FPS) {\n\n    canvas = document.getElementById('NPGcanvas');\n    ctx = canvas.getContext('2d');\n\n    WIDTH = canvas.width;\n    HEIGHT = canvas.height;\n    canvas.addEventListener('click', eventClick, false);\n    document.addEventListener('keyup', eventKeyUp, true);\n    document.addEventListener('keydown', eventKeyDown, true);\n    setInterval(main, 1000 / FPS);\n\n    myinit();\n}\n\nfunction main() {\n    update();\n    draw();\n}\n\nfunction refreshC(event, ui) {\n    var logC = ui.value;\n    svmC = Math.pow(10, logC);\n    $(\"#creport\").text(\"C = \" + svmC.toPrecision(2));\n    retrainSVM();\n}\n\nfunction refreshSig(event, ui) {\n    var logSig = ui.value;\n    rbfKernelSigma = Math.pow(10, logSig);\n    $(\"#sigreport\").text(\"Gaussian Kernel sigma = \" + rbfKernelSigma.toPrecision(2));\n    retrainSVM();\n}\n\nfunction refreshDeg(event, ui) {\n    var logDeg = ui.value;\n    degree_value = logDeg;\n    $(\"#degreport\").text(\"Polynomial Kernel degree = \" + degree_value);\n    retrainSVM();\n}\n\nfunction refreshA(event, ui) {\n    var logA = ui.value;\n    a_value = Math.pow(10, logA);\n    $(\"#areport\").text(\"Polynomial Kernel a = \" + a_value.toPrecision(2));\n    retrainSVM();\n\n}\n\nfunction refreshAlpha(event, ui) {\n    var logAlpha = ui.value;\n    alpha = Math.pow(10, logAlpha);\n    $(\"#alpreport\").text(\"Sigmoid Kernel alpha = \" + alpha.toPrecision(2));\n    retrainSVM();\n\n}\n\nfunction refreshCsig(event, ui) {\n    var logCsig = ui.value;\n    c_sig = Math.pow(10, logCsig);\n    $(\"#csigreport\").text(\"Sigmoid Kernel c-sigma = \" + c_sig.toPrecision(2));\n    retrainSVM();\n}\n\n\n\n$(function() {\n    // for C parameter\n    $(\"#slider1\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshC,\n        max: 2.0,\n        min: -2.0,\n        step: 0.1,\n        value: 0.0\n    });\n\n    // for rbf kernel sigma\n    $(\"#slider2\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshSig,\n        max: 2.0,\n        min: -2.0,\n        step: 0.1,\n        value: 0.0\n    });\n\n    $(\"#slider3\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshDeg,\n        max: 8,\n        min: 2,\n        step: 1,\n        value: 3\n    });\n\n    $(\"#slider4\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshA,\n        max: 2.0,\n        min: -2.0,\n        step: 0.1,\n        value: 0.0\n    });\n\n    $(\"#slider5\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshAlpha,\n        max: 2.0,\n        min: -2.0,\n        step: 0.1,\n        value: 0.0\n    });\n\n    $(\"#slider6\").slider({\n        orientation: \"horizontal\",\n        animate: \"slow\",\n        slide: refreshCsig,\n        max: 2.0,\n        min: -2.0,\n        step: 0.1,\n        value: 0.0\n    });\n\n    $(\"#slider1\").css('border-color', 'rgb(255,0,0)');\n    $(\"#slider2\").css('border-color', 'rgb(0,180,0)');\n    $(\"#slider3\").css('border-color', 'rgb(0,180,0)');\n    $(\"#slider4\").css('border-color', 'rgb(0,0,255)');\n    $(\"#slider5\").css('border-color', 'rgb(0,180,0)');\n    $(\"#slider6\").css('border-color', 'rgb(0,0,255)');\n    $(\"#slider1\").css('background', 'rgb(247, 188, 188)');\n    $(\"#slider2\").css('background', 'rgb(192, 247, 188)');\n    $(\"#slider3\").css('background', 'rgb(192, 247, 188)');\n    $(\"#slider4\").css('background', 'rgb(188, 217, 247)');\n    $(\"#slider5\").css('background', 'rgb(192, 247, 188)');\n    $(\"#slider6\").css('background', 'rgb(188, 217, 247)');\n    $(\".ui-slider-handle\").css('background', 'rgb(255,255,204)');\n});\n\n$(document).ready(function() {\n\n\n    $(\"#collapseInfo\").click(function() {\n        $(this).toggleClass(\"active\");\n        if ($(this).hasClass(\"active\")) {\n            $(this).text(\"Show Less..\");\n        } else {\n            $(this).text(\"Show More..\");\n        }\n    });\n\n    $(\"#collapseInst\").click(function() {\n        $(this).toggleClass(\"active\");\n        if ($(this).hasClass(\"active\")) {\n            $(this).text(\"Hide Instructions..\");\n        } else {\n            $(this).text(\"Show Instructions..\");\n        }\n    });\n});\n\nvar prevKernel;\nvar prevData;\nvar prevLabel;\n\nfunction getPrevKernel() {\n    return prevKernel;\n}\n\nfunction getPrevData() {\n    return prevData;\n}\n\nfunction getPrevLabel() {\n    return prevLabel;\n}\n\nfunction setPrevKernel(kid) {\n    prevKernel = kid;\n}\n\nfunction setPrevData(x) {\n    prevData = x;\n}\n\nfunction setPrevLabel(y) {\n    prevLabel = y;\n}"]}